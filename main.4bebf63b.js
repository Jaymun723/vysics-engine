parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RFzA":[function(require,module,exports) {
"use strict";function t(t,e){const r=Math.ceil("number"==typeof e?t:0),o=Math.floor("number"==typeof e?e:t);return Math.floor(Math.random()*(o-r+1))+r}function e(t,e){return Math.random()*(e-t)+t}function r(e){return e[t(e.length-1)]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.randint=t,exports.randfloat=e,exports.choice=r;
},{}],"rLS3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../random");class e{constructor(t,e,r){this.width=t,this.height=e,this._data=[],r?this.setData(r):this._data=Array.from({length:t},()=>Array.from({length:e},()=>0))}static random(r,h){let i=[];for(let e=0;e<r;e++){i.push([]);for(let r=0;r<h;r++)i[e].push(t.randfloat(-1,1))}return new e(r,h,i)}copy(){return new e(this.width,this.height,this._data)}testData(t){if(Array.isArray(t)&&t.length===this.width){for(const e of t)if(!Array.isArray(e)||e.length!==this.height||e.some(t=>"number"!=typeof t))return!1;return!0}return!1}get(t,e){return this._data[t][e]}set(t,e,r){this._data[t][e]=r}get data(){return this._data}setData(t){if(!this.testData(t))throw new Error("The data dont fit the shape.");this._data=t}static apply(t,e){return t.data.map((t,r)=>t.map((t,h)=>e(t,r,h)))}apply(t){this._data=e.apply(this,t)}static merge(t,r,h){if(t.width<r.width||t.height<r.height)throw new Error("The two matrix provided is aren't compatible (not the same size).");return e.apply(t,(t,e,i)=>h(t,r.get(e,i),e,i))}merge(t,r){this._data=e.merge(this,t,r)}static add(t,r){if(t.width!==r.width||t.height!==r.height)throw new Error("The matrixes don't have the same size.");return new e(t.width,t.height,e.merge(t,r,(t,e)=>t+e))}add(t){const r=e.add(this,t);this._data=r._data}static sub(t,r){return new e(t.width,r.width,e.merge(t,r,(t,e)=>t-e))}sub(t){const r=e.add(this,t);this._data=r._data}static mult(t,r){if("number"==typeof r)return new e(t.width,t.height,e.apply(t,t=>t*r));{if(t.height!==r.width)throw new Error("Invalid width and heights.");const h=new e(t.width,r.height);for(let e=0;e<h.width;e++)for(let i=0;i<h.height;i++){let a=0;for(let h=0;h<t.height;h++)a+=t.get(e,h)*r.get(h,i);h.set(e,i,a)}return h}}mult(t){if("number"!=typeof t)return e.mult(this,t);this.apply(e=>e*t)}static div(t,r){return new e(t.width,t.height,e.apply(t,t=>t/r))}div(t){this.apply(e=>e/t)}}exports.Matrix2D=e;
},{"../random":"RFzA"}],"h70h":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Matrix2D"));
},{"./Matrix2D":"rLS3"}],"ENmO":[function(require,module,exports) {
"use strict";function r(r,t){return Math.floor(r/t)}function t(r,t,e){return Math.min(Math.max(t,r),e)}function e(r){return t=>Number(t.toPrecision(r))}function n(r,t){return Array.from({length:r},()=>t)}function o(r,t,e,n,o){return(r-t)/(e-t)*(o-n)+n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.eucDiv=r,exports.clamp=t,exports.toPrecision=e,exports.emptyArray=n,exports.toRange=o;
},{}],"jyIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../utils");class r{constructor(t,r){this.x=t,this.y=r}static from(t){return new r(t.x,t.y)}map(t){return new r(t(this.x,0),t(this.y,1))}apply(t,e){return new r(t(this.x),e(this.y))}merge(t,e){return new r(e(this.x,t.x,0),e(this.y,t.y,1))}add(t,e){let s="number"==typeof t?new r(t,e||0):t;return this.merge(s,(t,r)=>t+r)}sub(t,e){let s="number"==typeof t?new r(t,e||0):t;return this.merge(s,(t,r)=>t-r)}mul(t){return"number"==typeof t?this.map(r=>r*t):this.merge(t,(t,r)=>t*r)}div(t){return"number"==typeof t?this.map(r=>r/t):this.merge(t,(t,r)=>t/r)}normalize(){const t=this.norm();let r=t;return t>0&&(r=1/t),this.mul(r)}norm(){return Math.sqrt(this.squaredNorm())}squaredNorm(){return Math.pow(this.x,2)+Math.pow(this.y,2)}cross(t){return this.x*t.y-this.y*t.x}dot(t){return this.x*t.x+this.y*t.y}clamp(e,s,n,i){return new r(t.clamp(this.x,e,s),t.clamp(this.y,n||e,i||s))}rotateAround(t,e){const s=this.sub(t);return t.add(new r(s.x*Math.cos(e)-s.y*Math.sin(e),s.x*Math.sin(e)+s.y*Math.cos(e)))}angleWith(t){return Math.acos(this.dot(t)/(this.norm()*t.norm()))}}exports.Vec2D=r;
},{"../utils":"ENmO"}],"nZsw":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Vec2D"));
},{"./Vec2D":"jyIA"}],"cHoJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(e=[]){this.layers=[];for(const r of e)this.addLayer(r)}addLayer(e){if(0===this.layers.length)this.layers.push(e);else{if(e.inputSize!==this.layers[this.layers.length-1].outputSize)throw new Error("The new layer input size doesn't match the previous layer output size.");this.layers.push(e)}}predict(e){let r=e.slice();for(const s of this.layers)try{r=s.compute(r)}catch(t){throw new Error(`Error in layer ${this.layers.indexOf(s)}: ${t}`)}return r}}exports.NeuralNetwork=e;
},{}],"tNSY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t,e){this.func=t,this.dfunc=e}}exports.ActivationFunction=t,exports.sigmoidFn=new t(t=>1/(1+Math.exp(-t)),t=>t*(1-t));
},{}],"TxLl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../Matrix2D"),i=require("./ActivationFunction");class e{constructor(e){this.inputSize=e.inputSize,this.outputSize=e.outputSize,this.activationFunction=e.activationFunction||i.sigmoidFn,this.weights=t.Matrix2D.random(this.outputSize,this.inputSize),this.biais=t.Matrix2D.random(this.outputSize,1)}compute(i){if(i.length!==this.inputSize)throw new Error("Wrong input size.");const e=new t.Matrix2D(this.inputSize,1,i.map(t=>[t])),n=this.weights.mult(e);return n.add(this.biais),n.apply(t=>this.activationFunction.func(t)),n.data.map(t=>t[0])}}exports.SimpleLayer=e;
},{"../Matrix2D":"h70h","./ActivationFunction":"tNSY"}],"j1VH":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./NeuralNetwork")),e(require("./Layer"));
},{"./NeuralNetwork":"cHoJ","./Layer":"TxLl"}],"JRWo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../Vec2D");class e{static getEdges(t){const e=[];for(let n=0;n<t.length;n++){const s=t[(n+1)%t.length].sub(t[n]);e.push(s)}return e}static getNormals(n){return e.getEdges(n).map(e=>new t.Vec2D(-e.y,e.x).normalize())}static getCentroid(t){return t.reduce((t,e)=>t.add(e)).div(t.length)}static getInteriorAngles(t){const e=[];for(let n=0;n<t.length;n++){const s=(n+t.length-1)%t.length,r=(n+1)%t.length,o=t[s].sub(t[n]),l=t[r].sub(t[n]),c=Math.atan2(o.cross(l),o.dot(l));e.push(c)}return e}static getBoundRadius(t){const n=e.getCentroid(t);let s=0;for(let e=0;e<t.length;e++){const r=t[e].sub(n).norm();r>s&&(s=r)}return s}static getMomentOfInertia(e,n){let s=0,r=new t.Vec2D(0,0),o=0;for(let t=0;t<e.length;t++){const n=(t+1)%e.length,l=e[t],c=e[n],g=l.cross(c)/2,a=l.add(c).div(3),u=g*(l.dot(l)+c.dot(c)+l.dot(c))/6;r=r.mul(s).add(a.mul(g)).div(s+g),s+=g,o+=u}return o*=n/s,o-=n*r.dot(r)}static getArea(t){let e=0;for(let n=0;n<t.length;n++){const s=(n+1)%t.length,r=t[n],o=t[s];e+=r.cross(o)/2}return e}static isPointIn(t,e){const n=(t,e,n)=>(n.y-t.y)*(e.x-t.x)-(n.x-t.x)*(e.y-t.y),s=t.length;let r=0;for(let o=0;o<s;o++){const l=n(t[o],t[(o+1)%s],e);if(0==l)return l;r+=l>0?0:1}return Math.abs(r)==s?1:-1}}exports.Polygon=e;
},{"../Vec2D":"nZsw"}],"qONG":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Matrix2D")),e(require("./Vec2D")),e(require("./utils")),e(require("./random")),e(require("./NeuralNetwork")),e(require("./Polygon"));
},{"./Matrix2D":"h70h","./Vec2D":"nZsw","./utils":"ENmO","./random":"RFzA","./NeuralNetwork":"j1VH","./Polygon":"JRWo"}],"zFaM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(t){this._width=t.width,this._height=t.height,this.canvasEl=document.createElement("canvas"),this.canvasEl.width=this._width,this.canvasEl.height=this._height,this.ctx=this.canvasEl.getContext("2d")}get width(){return this._width}set width(t){this.canvasEl.width=t,this._width=t}get height(){return this._height}set height(t){this.canvasEl.height=t,this._height=t}}exports.CanvasWrapper=t;
},{}],"ucxP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./CanvasWrapper");class s extends t.CanvasWrapper{constructor(){super(...arguments),this.lastTime=0,this.rafRef=0,this.running=!1,this.update=(t=>{}),this.render=(()=>{}),this.main=(()=>{if(this.running){0===this.lastTime&&(this.lastTime=Date.now());const t=Date.now(),s=(t-this.lastTime)/1e3;this.update(s),this.render(),this.lastTime=t,this.rafRef=requestAnimationFrame(this.main)}})}start(){this.running=!0,this.main()}stop(){this.running=!1,this.lastTime=0,cancelAnimationFrame(this.rafRef)}}exports.CanvasLogic=s;
},{"./CanvasWrapper":"zFaM"}],"hkI7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./CanvasLogic"),i={color:"black",lineWidth:1,font:"10px Arial",align:"start"};class e extends t.CanvasLogic{line(t){this.ctx.beginPath(),this.ctx.moveTo(t.x1,t.y1),this.ctx.lineWidth=t.lineWidth||i.lineWidth,this.ctx.lineTo(t.x2,t.y2),this.ctx.strokeStyle=t.color||i.color,this.ctx.stroke(),this.ctx.closePath()}rect(t){this.ctx.beginPath(),this.ctx.lineWidth=t.lineWidth||i.lineWidth,this.ctx.rect(t.x,t.y,t.width,t.height),t.stroke?(this.ctx.strokeStyle=t.color||i.color,this.ctx.stroke()):(this.ctx.fillStyle=t.color||i.color,this.ctx.fill()),this.ctx.closePath()}circle(t){this.ctx.beginPath(),this.ctx.lineWidth=t.lineWidth||i.lineWidth,this.ctx.arc(t.x,t.y,t.radius,0,2*Math.PI),t.stroke?(this.ctx.strokeStyle=t.color||i.color,this.ctx.stroke()):(this.ctx.fillStyle=t.color||i.color,this.ctx.fill()),this.ctx.closePath()}getShaper(t){const e={start:()=>(this.ctx.beginPath(),this.ctx.lineWidth=t.lineWidth||i.lineWidth,e),go:(t,i)=>(this.ctx.moveTo(t,i),e),line:(t,i)=>(this.ctx.lineTo(t,i),e),done:()=>{this.ctx.closePath(),t.stroke?(this.ctx.strokeStyle=t.color||i.color,this.ctx.stroke()):(this.ctx.fillStyle=t.color||i.color,this.ctx.fill())}};return e}triangle(t){this.ctx.beginPath(),this.ctx.lineWidth=t.lineWidth||i.lineWidth,this.ctx.moveTo(t.x1,t.y1),this.ctx.lineTo(t.x2,t.y2),this.ctx.lineTo(t.x3,t.y3),this.ctx.lineTo(t.x1,t.y1),t.stroke?(this.ctx.strokeStyle=t.color||i.color,this.ctx.stroke()):(this.ctx.fillStyle=t.color||i.color,this.ctx.fill()),this.ctx.closePath()}background(t){this.rect({x:0,y:0,color:t,height:this.height,width:this.width})}text(t){this.ctx.font=t.font||i.font,this.ctx.textAlign=t.align||i.align,this.ctx.lineWidth=t.lineWidth||i.lineWidth,t.stroke?(this.ctx.strokeStyle=t.color||i.color,this.ctx.strokeText(t.text,t.x,t.y,t.maxWidth)):(this.ctx.fillStyle=t.color||i.color,this.ctx.fillText(t.text,t.x,t.y,t.maxWidth))}clear(){this.ctx.clearRect(0,0,this.width,this.height)}}exports.CanvasDrawers=e;
},{"./CanvasLogic":"ucxP"}],"esyl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./CanvasDrawers");class s extends t.CanvasDrawers{rotationGroup(t,s){this.ctx.save(),this.ctx.translate(s.x,s.y),this.ctx.rotate(s.rotation),this.ctx.translate(-s.x,-s.y),t(),this.ctx.restore()}groupFn(t,s){const r=r=>this.groupFn([...t,r],s);return{translate:t=>r(()=>this.ctx.translate(t.x,t.y)),rotate:t=>r(()=>this.ctx.rotate(t.rotation)),scale:t=>r(()=>this.ctx.scale(t.x,t.y)),render:()=>{this.ctx.save();for(const s of t)s();s(),this.ctx.restore()}}}group(t){return this.groupFn([],t)}}exports.CanvasGroups=s;
},{"./CanvasDrawers":"hkI7"}],"d4DR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./CanvasGroups");exports.loadImage=(e=>new Promise(a=>{const i=new Image;i.src=e,i.onload=(()=>{a(i)})}));class a extends e.CanvasGroups{image(e){void 0!==e.imageX&&void 0!==e.imageY&&void 0!==e.imageWidth&&void 0!==e.ImageHeight&&void 0!==e.maxWidth&&void 0!==e.maxHeight?this.ctx.drawImage(e.image,e.imageX,e.imageY,e.imageWidth,e.ImageHeight,e.x,e.y,e.maxWidth,e.maxHeight):void 0!==e.maxWidth&&void 0!==e.maxHeight?this.ctx.drawImage(e.image,e.x,e.y,e.maxWidth,e.maxHeight):this.ctx.drawImage(e.image,e.x,e.y)}}exports.CanvasImage=a;
},{"./CanvasGroups":"esyl"}],"JV4a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./CanvasImage");class t extends e.CanvasImage{constructor(){super(...arguments),this.mouse={x:0,y:0,button:0,preventDefault:!1,contextmenu:!0},this.mouseHandler=(e=>{this.mouse.preventDefault&&e.preventDefault(),this.mouse.x=e.clientX,this.mouse.y=e.clientY,this.mouse.button=e.buttons}),this.contextmenu=(e=>{!1===this.mouse.contextmenu&&e.preventDefault()})}initialize(){this.canvasEl.addEventListener("mousemove",this.mouseHandler),this.canvasEl.addEventListener("mouseup",this.mouseHandler),this.canvasEl.addEventListener("mousedown",this.mouseHandler),this.canvasEl.addEventListener("contextmenu",this.contextmenu)}deinitialize(){this.canvasEl.removeEventListener("mousemove",this.mouseHandler),this.canvasEl.removeEventListener("mouseup",this.mouseHandler),this.canvasEl.removeEventListener("mousedown",this.mouseHandler),this.canvasEl.removeEventListener("contextmenu",this.contextmenu)}start(){super.start(),this.initialize()}stop(){super.stop(),this.deinitialize()}}exports.CanvasMouse=t;
},{"./CanvasImage":"d4DR"}],"wcrS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("./CanvasImage");exports.loadImage=e.loadImage;const s=require("./CanvasMouse");class a extends s.CanvasMouse{}exports.Vancas=a,exports.createVancas=(e=>new a(e));
},{"./CanvasImage":"d4DR","./CanvasMouse":"JV4a"}],"HBED":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../random");class e{constructor(t,e,r){this.width=t,this.height=e,this._data=[],r?this.setData(r):this._data=Array.from({length:t},()=>Array.from({length:e},()=>0))}static random(r,h){let i=[];for(let e=0;e<r;e++){i.push([]);for(let r=0;r<h;r++)i[e].push(t.randfloat(-1,1))}return new e(r,h,i)}copy(){return new e(this.width,this.height,this._data)}testData(t){if(Array.isArray(t)&&t.length===this.width){for(const e of t)if(!Array.isArray(e)||e.length!==this.height||e.some(t=>"number"!=typeof t))return!1;return!0}return!1}get(t,e){return this._data[t][e]}set(t,e,r){this._data[t][e]=r}get data(){return this._data}setData(t){if(!this.testData(t))throw new Error("The data dont fit the shape.");this._data=t}static apply(t,e){return t.data.map((t,r)=>t.map((t,h)=>e(t,r,h)))}apply(t){this._data=e.apply(this,t)}static merge(t,r,h){if(t.width<r.width||t.height<r.height)throw new Error("The two matrix provided is aren't compatible (not the same size).");return e.apply(t,(t,e,i)=>h(t,r.get(e,i),e,i))}merge(t,r){this._data=e.merge(this,t,r)}static add(t,r){if(t.width!==r.width||t.height!==r.height)throw new Error("The matrixes don't have the same size.");return new e(t.width,t.height,e.merge(t,r,(t,e)=>t+e))}add(t){const r=e.add(this,t);this._data=r._data}static sub(t,r){return new e(t.width,r.width,e.merge(t,r,(t,e)=>t-e))}sub(t){const r=e.add(this,t);this._data=r._data}static mult(t,r){if("number"==typeof r)return new e(t.width,t.height,e.apply(t,t=>t*r));{if(t.height!==r.width)throw new Error("Invalid width and heights.");const h=new e(t.width,r.height);for(let e=0;e<h.width;e++)for(let i=0;i<h.height;i++){let a=0;for(let h=0;h<t.height;h++)a+=t.get(e,h)*r.get(h,i);h.set(e,i,a)}return h}}mult(t){if("number"!=typeof t)return e.mult(this,t);this.apply(e=>e*t)}static div(t,r){return new e(t.width,t.height,e.apply(t,t=>t/r))}div(t){this.apply(e=>e/t)}}exports.Matrix2D=e;
},{"../random":"RFzA"}],"lCok":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Matrix2D"));
},{"./Matrix2D":"HBED"}],"Cgv7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../utils");class r{constructor(t,r){this.x=t,this.y=r}static from(t){return new r(t.x,t.y)}map(t){return new r(t(this.x,0),t(this.y,1))}apply(t,e){return new r(t(this.x),e(this.y))}merge(t,e){return new r(e(this.x,t.x,0),e(this.y,t.y,1))}add(t,e){let s="number"==typeof t?new r(t,e||0):t;return this.merge(s,(t,r)=>t+r)}sub(t,e){let s="number"==typeof t?new r(t,e||0):t;return this.merge(s,(t,r)=>t-r)}mul(t){return"number"==typeof t?this.map(r=>r*t):this.merge(t,(t,r)=>t*r)}div(t){return"number"==typeof t?this.map(r=>r/t):this.merge(t,(t,r)=>t/r)}normalize(){const t=this.norm();let r=t;return t>0&&(r=1/t),this.mul(r)}norm(){return Math.sqrt(this.squaredNorm())}squaredNorm(){return Math.pow(this.x,2)+Math.pow(this.y,2)}cross(t){return this.x*t.y-this.y*t.x}dot(t){return this.x*t.x+this.y*t.y}clamp(e,s,n,i){return new r(t.clamp(this.x,e,s),t.clamp(this.y,n||e,i||s))}rotateAround(t,e){const s=this.sub(t);return t.add(new r(s.x*Math.cos(e)-s.y*Math.sin(e),s.x*Math.sin(e)+s.y*Math.cos(e)))}angleWith(t){return Math.acos(this.dot(t)/(this.norm()*t.norm()))}}exports.Vec2D=r;
},{"../utils":"ENmO"}],"Qivt":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Vec2D"));
},{"./Vec2D":"Cgv7"}],"mKKh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../Matrix2D"),i=require("./ActivationFunction");class e{constructor(e){this.inputSize=e.inputSize,this.outputSize=e.outputSize,this.activationFunction=e.activationFunction||i.sigmoidFn,this.weights=t.Matrix2D.random(this.outputSize,this.inputSize),this.biais=t.Matrix2D.random(this.outputSize,1)}compute(i){if(i.length!==this.inputSize)throw new Error("Wrong input size.");const e=new t.Matrix2D(this.inputSize,1,i.map(t=>[t])),n=this.weights.mult(e);return n.add(this.biais),n.apply(t=>this.activationFunction.func(t)),n.data.map(t=>t[0])}}exports.SimpleLayer=e;
},{"../Matrix2D":"lCok","./ActivationFunction":"tNSY"}],"LBO1":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./NeuralNetwork")),e(require("./Layer"));
},{"./NeuralNetwork":"cHoJ","./Layer":"mKKh"}],"I0uy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../Vec2D");class e{static getEdges(t){const e=[];for(let n=0;n<t.length;n++){const s=t[(n+1)%t.length].sub(t[n]);e.push(s)}return e}static getNormals(n){return e.getEdges(n).map(e=>new t.Vec2D(-e.y,e.x).normalize())}static getCentroid(t){return t.reduce((t,e)=>t.add(e)).div(t.length)}static getInteriorAngles(t){const e=[];for(let n=0;n<t.length;n++){const s=(n+t.length-1)%t.length,r=(n+1)%t.length,o=t[s].sub(t[n]),l=t[r].sub(t[n]),c=Math.atan2(o.cross(l),o.dot(l));e.push(c)}return e}static getBoundRadius(t){const n=e.getCentroid(t);let s=0;for(let e=0;e<t.length;e++){const r=t[e].sub(n).norm();r>s&&(s=r)}return s}static getMomentOfInertia(e,n){let s=0,r=new t.Vec2D(0,0),o=0;for(let t=0;t<e.length;t++){const n=(t+1)%e.length,l=e[t],c=e[n],g=l.cross(c)/2,a=l.add(c).div(3),u=g*(l.dot(l)+c.dot(c)+l.dot(c))/6;r=r.mul(s).add(a.mul(g)).div(s+g),s+=g,o+=u}return o*=n/s,o-=n*r.dot(r)}static getArea(t){let e=0;for(let n=0;n<t.length;n++){const s=(n+1)%t.length,r=t[n],o=t[s];e+=r.cross(o)/2}return e}static isPointIn(t,e){const n=(t,e,n)=>(n.y-t.y)*(e.x-t.x)-(n.x-t.x)*(e.y-t.y),s=t.length;let r=0;for(let o=0;o<s;o++){const l=n(t[o],t[(o+1)%s],e);if(0==l)return l;r+=l>0?0:1}return Math.abs(r)==s?1:-1}}exports.Polygon=e;
},{"../Vec2D":"Qivt"}],"RxJD":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./Matrix2D")),e(require("./Vec2D")),e(require("./utils")),e(require("./random")),e(require("./NeuralNetwork")),e(require("./Polygon"));
},{"./Matrix2D":"lCok","./Vec2D":"Qivt","./utils":"ENmO","./random":"RFzA","./NeuralNetwork":"LBO1","./Polygon":"I0uy"}],"bea3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleCircleCollision=void 0;var r=require("maabm"),e=require("."),i=function(i,a){var n=a.center.sub(i.center),s=n.squaredNorm();if(Math.pow(i.radius+a.radius,2)>=s){if(0!==s){var o=i.radius+a.radius-n.norm(),d=n.mul(-1).normalize(),t=a.center.add(d.mul(a.radius));return new e.CollisionInfo({a:i,b:a,depth:o,normal:n.normalize(),start:t})}return i.radius>a.radius?new e.CollisionInfo({a:i,b:a,depth:i.radius+a.radius,normal:new r.Vec2D(0,-1),start:i.center.add(0,i.radius)}):new e.CollisionInfo({a:i,b:a,depth:i.radius+a.radius,normal:new r.Vec2D(0,-1),start:a.center.add(0,a.radius)})}return!1};exports.circleCircleCollision=i;
},{"maabm":"RxJD",".":"cCa7"}],"vA6V":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollisionInfo=void 0;var i=function(){function e(n){t(this,e),this.a=n.a,this.b=n.b,this.depth=n.depth,this.normal=n.normal,this.start=n.start,this.end=this.start.add(this.normal.mul(this.depth))}return n(e,[{key:"changeDirection",value:function(){return new e({a:this.a,b:this.b,depth:this.depth,normal:this.normal.mul(-1),start:this.end})}}]),e}();exports.CollisionInfo=i;
},{}],"mYpB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonCircleCollision=void 0;var e=require("."),r=function(e,r){for(var n=-1/0,t=0,i=0;i<e.vertices.length;++i){var s=r.center.sub(e.vertices[i]).dot(e.normals[i]);if(s>0)return{inside:!1,nearestEdgeIndex:i,distance:s};s>n&&(n=s,t=i)}return{inside:!0,nearestEdgeIndex:t,distance:n}},n=function(n,t){var i=r(n,t),s=i.distance,a=i.inside,o=i.nearestEdgeIndex;if(a){var d=n.normals[o].mul(t.radius);return new e.CollisionInfo({a:n,b:t,depth:t.radius-s,normal:n.normals[o],start:t.center.sub(d)})}var l=t.center.sub(n.vertices[o]),u=n.vertices[(o+1)%n.vertices.length].sub(n.vertices[o]);if(l.dot(u)<0){var c=l.norm();if(c>t.radius)return!1;var v=l.normalize(),m=v.mul(-t.radius);return new e.CollisionInfo({a:n,b:t,depth:t.radius-c,normal:v,start:t.center.add(m)})}var f=t.center.sub(n.vertices[(o+1)%n.vertices.length]),b=n.vertices[o].sub(n.vertices[(o+1)%n.vertices.length]);if(f.dot(b)<0){var p=f.norm();if(p>t.radius)return!1;var g=f.normalize(),h=g.mul(-t.radius);return new e.CollisionInfo({a:n,b:t,depth:t.radius-p,normal:g,start:t.center.add(h)})}if(s<t.radius){var C=n.normals[o].mul(t.radius);return new e.CollisionInfo({a:n,b:t,depth:t.radius-s,normal:n.normals[o],start:t.center.sub(C)})}return!1};exports.polygonCircleCollision=n;
},{".":"cCa7"}],"cTMH":[function(require,module,exports) {
"use strict";function t(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=r(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var e=0,i=function(){};return{s:i,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return l=t.done,t},e:function(t){u=!0,a=t},f:function(){try{l||null==o.return||o.return()}finally{if(u)throw a}}}}function r(t,r){if(t){if("string"==typeof t)return n(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(t,r):void 0}}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=t[n];return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonPolygonCollision=void 0;var o=require("."),e=function(r,n,o){var e,i={dist:-1/0,point:void 0},a=t(r);try{for(a.s();!(e=a.n()).done;){var l=e.value,u=l.sub(o).dot(n);u>0&&u>i.dist&&(i.point=l,i.dist=u)}}catch(s){a.e(s)}finally{a.f()}return void 0===i.point?void 0:i},i=function(t,r){for(var n,i=1/0,a=0,l=!0,u=0;l&&u<t.normals.length;){var s=t.normals[u].mul(-1),f=t.vertices[u],d=e(r.vertices,s,f);l=void 0!==d,void 0!==d&&d.dist<i&&(i=d.dist,a=u,n=d.point),u++}if(l&&n){var c=t.normals[a],v=n.add(c.mul(i));return new o.CollisionInfo({a:t,b:r,depth:i,normal:c,start:v})}return!1},a=function(t,r){var n=i(t,r);if(!1!==n){var e=i(r,t);if(!1!==e){if(n.depth<e.depth){var a=n.normal.mul(n.depth);return new o.CollisionInfo({a:t,b:r,depth:n.depth,normal:n.normal,start:n.start.sub(a)})}return new o.CollisionInfo({a:t,b:r,depth:e.depth,normal:e.normal.mul(-1),start:e.start})}}return!1};exports.polygonPolygonCollision=a;
},{".":"cCa7"}],"O67D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveCollision=void 0;var a=function(a,i){if(0!==a.a.invMass||0!==a.b.invMass){if(i){var s=a.depth/(a.a.invMass+a.b.invMass)*i.rate,n=a.normal.mul(s);a.a.move(n.mul(-a.a.invMass)),a.b.move(n.mul(a.b.invMass))}var t=a.normal,l=a.start.mul(a.b.invMass/(a.a.invMass+a.b.invMass)),o=a.end.mul(a.a.invMass/(a.a.invMass+a.b.invMass)),v=l.add(o),e=v.sub(a.a.position),r=v.sub(a.b.position),b=a.a.velocity.add(-1*a.a.angularVelocity*e.y,a.a.angularVelocity*e.x),u=a.b.velocity.add(-1*a.b.angularVelocity*r.y,a.b.angularVelocity*r.x).sub(b),c=u.dot(t);if(!(c>0)){var M=Math.min(a.a.restitution,a.b.restitution),y=Math.min(a.a.friction,a.b.friction),m=e.cross(t),d=r.cross(t),g=-(1+M)*c/(a.a.invMass+a.b.invMass+m*m*a.a.invInertia+d*d*a.b.invInertia),I=t.mul(g);a.a.velocity=a.a.velocity.sub(I.mul(a.a.invMass)),a.b.velocity=a.b.velocity.add(I.mul(a.b.invMass)),a.a.angularVelocity-=m*g*a.a.invInertia,a.b.angularVelocity+=d*g*a.b.invInertia;var V=u.sub(t.mul(c)).normalize().mul(-1),f=e.cross(V),p=r.cross(V),x=-(1+M)*u.dot(V)*y/(a.a.invMass+a.b.invMass+f*f*a.a.invInertia+p*p*a.b.invInertia);x>g&&(x=g);var h=V.mul(x);a.a.velocity=a.a.velocity.sub(h.mul(a.a.invMass)),a.b.velocity=a.b.velocity.add(h.mul(a.b.invMass)),a.a.angularVelocity-=f*x*a.a.invInertia,a.b.angularVelocity+=p*x*a.b.invInertia}}};exports.resolveCollision=a;
},{}],"cCa7":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,o,t){void 0===t&&(t=o),Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[o]}})}:function(e,r,o,t){void 0===t&&(t=o),e[t]=r[o]}),r=this&&this.__exportStar||function(r,o){for(var t in r)"default"===t||Object.prototype.hasOwnProperty.call(o,t)||e(o,r,t)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./CircleCircle"),exports),r(require("./CollisionInfo"),exports),r(require("./PolygonCircle"),exports),r(require("./PolygonPolygon"),exports),r(require("./resolveCollision"),exports);
},{"./CircleCircle":"bea3","./CollisionInfo":"vA6V","./PolygonCircle":"mYpB","./PolygonPolygon":"cTMH","./resolveCollision":"O67D"}],"PxOZ":[function(require,module,exports) {
"use strict";function r(r,t){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=e(r))||t&&r&&"number"==typeof r.length){n&&(r=n);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,f=!1;return{s:function(){n=r[Symbol.iterator]()},n:function(){var r=n.next();return c=r.done,r},e:function(r){f=!0,i=r},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw i}}}}function e(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}function t(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyFlick=exports.createDragHook=exports.gravityHook=void 0;var n=require("."),o=require("maabm"),a=function(e){var t,o=r(e.objects);try{for(o.s();!(t=o.n()).done;){var a=t.value;a.hasGravity&&(a.force=a.force.add(n.PhysicsEngine.gravity))}}catch(i){o.e(i)}finally{o.f()}};exports.gravityHook=a;var i=function(e){return function(t){var n,o=r(t.objects);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.dragCoefficient){var i=a.velocity,c=i.mul(i),f=a.shape.getArea(),u=c.mul(f*e*a.dragCoefficient*-.5);a.force=a.force.add(u)}}}catch(l){o.e(l)}finally{o.f()}}};exports.createDragHook=i;var c=function(r){var e=r.force,t=r.object,n=r.pointOfApplication;if("circle"===t.shape.type){if(t.position.sub(n).norm()>t.shape.radius)return}else if(-1===o.Polygon.isPointIn(t.shape.vertices,n))return;t.force=e;var a=n.sub(t.position);t.torque=a.cross(e)};exports.applyFlick=c;
},{".":"FljV","maabm":"RxJD"}],"ZtZs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectAABB=exports.shapeToBox=void 0;var e=function(e){return{min:e.center.sub(e.boundAABB.div(2)),max:e.center.add(e.boundAABB.div(2))}};exports.shapeToBox=e;var t=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.min.y<=t.max.y&&e.max.y>=t.min.y};exports.intersectAABB=t;
},{}],"o25D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bruteBroadPhase=void 0;var e=require("../Collision"),o=require("."),r=function(r){for(var l=r.objects,t=[],i=0;i<l.length;i++)for(var p=i+1;p<l.length;p++){var n=l[i].shape,s=l[p].shape,c=o.shapeToBox(n),a=o.shapeToBox(s);if(o.intersectAABB(c,a)){var y=o.converter(l[i],l[p]);if("circle"===n.type&&"circle"===s.type){var g=e.circleCircleCollision(n,s);!1!==g&&t.push(y(g))}else if("rectangle"!==n.type&&"polygon"!==n.type||"rectangle"!==s.type&&"polygon"!==s.type)if("rectangle"!==n.type&&"polygon"!==n.type||"circle"!==s.type){if("circle"===n.type&&("polygon"===s.type||"rectangle"===s.type)){var h=e.polygonCircleCollision(s,n);!1!==h&&(h=h.changeDirection(),t.push(y(h)))}}else{var u=e.polygonCircleCollision(n,s);!1!==u&&t.push(y(u))}else{var v=e.polygonPolygonCollision(n,s);!1!==v&&t.push(y(v))}}}return t};exports.bruteBroadPhase=r;
},{"../Collision":"cCa7",".":"R7R7"}],"JKg5":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var h=t[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(i,h.key,h)}}function e(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SpatialGrid=void 0;var h=require("."),r=function(){function t(e){i(this,t),this.allocatedCells=0,this.checked={},this.hashChecked=0,this.min=e.min,this.max=e.max,this.pxPerCell=e.pxPerCell;var h=this.max.sub(this.min);this.width=Math.floor(h.x/this.pxPerCell),this.height=Math.floor(h.y/this.pxPerCell),this.totalCells=this.width*this.height,this.grid=Array(this.width)}return e(t,[{key:"insert",value:function(i){for(var t=h.shapeToBox(i.shape),e={min:t.min.div(this.pxPerCell).map(Math.floor),max:t.max.div(this.pxPerCell).map(Math.floor)},r=Math.min(e.max.x,this.width-1),s=Math.min(e.max.y,this.height-1),a=e.min.x;a<=r;a++){this.grid[a]||(this.grid[a]=Array(this.height));for(var o=e.min.y;o<=s;o++)this.grid[a][o]||(this.grid[a][o]=[],this.allocatedCells++),this.grid[a][o].push(i)}}},{key:"checkCollision",value:function(){for(var i=[],t=0;t<this.width;t++)if(this.grid[t])for(var e=0;e<this.height;e++)if(this.grid[t][e])for(var r=this.grid[t][e],s=0;s<r.length;s++)for(var a=s+1;a<r.length;a++){var o=r[s],n=r[a],l="".concat(o.id,":").concat(n.id),c="".concat(n.id,":").concat(o.id);if(this.hashChecked+=2,!this.checked[l]&&!this.checked[c]){this.checked[l]=!0,this.checked[c]=!0;var d=h.shapeToBox(o.shape),f=h.shapeToBox(n.shape);h.intersectAABB(d,f)&&(0===o.mass&&0===n.mass||i.push([o,n]))}}return i}}]),t}();exports.SpatialGrid=r;
},{".":"R7R7"}],"OVed":[function(require,module,exports) {
"use strict";function e(e,o){return n(e)||t(e,o)||a(e,o)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(p){o=!0,a=p}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return t}}function n(e){if(Array.isArray(e))return e}function o(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=a(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,p=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return l=e.done,e},e:function(e){p=!0,i=e},f:function(){try{l||null==t.return||t.return()}finally{if(p)throw i}}}}function a(e,r){if(e){if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l=this&&this.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.gridBroadPhase=void 0;var p=require("../Collision"),s=require("."),c=function(r){var t,n=r.objects,a=l(r,["objects"]),i=new s.SpatialGrid(a),c=[],y=o(n);try{for(y.s();!(t=y.n()).done;){var u=t.value;i.insert(u)}}catch(w){y.e(w)}finally{y.f()}var f,h=o(i.checkCollision());try{for(h.s();!(f=h.n()).done;){var v=e(f.value,2),b=v[0],d=v[1],g=s.converter(b,d);if("circle"===b.shape.type&&"circle"===d.shape.type){var m=p.circleCircleCollision(b.shape,d.shape);!1!==m&&c.push(g(m))}else if("rectangle"!==b.shape.type&&"polygon"!==b.shape.type||"rectangle"!==d.shape.type&&"polygon"!==d.shape.type)if("rectangle"!==b.shape.type&&"polygon"!==b.shape.type||"circle"!==d.shape.type){if("circle"===b.shape.type&&("polygon"===d.shape.type||"rectangle"===d.shape.type)){var O=p.polygonCircleCollision(d.shape,b.shape);!1!==O&&(O=O.changeDirection(),c.push(g(O)))}}else{var S=p.polygonCircleCollision(b.shape,d.shape);!1!==S&&c.push(g(S))}else{var j=p.polygonPolygonCollision(b.shape,d.shape);!1!==j&&c.push(g(j))}}}catch(w){h.e(w)}finally{h.f()}return c};exports.gridBroadPhase=c;
},{"../Collision":"cCa7",".":"R7R7"}],"BP08":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.converter=void 0;var e=require("../Collision"),r=function(r,n){return function(o){return new e.CollisionInfo(Object.assign(Object.assign({},o),{a:r,b:n}))}};exports.converter=r;
},{"../Collision":"cCa7"}],"R7R7":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||e(t,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./AABB"),exports),r(require("./BruteBroadPhase"),exports),r(require("./Grid"),exports),r(require("./GridBroadPhase"),exports),r(require("./utils"),exports);
},{"./AABB":"ZtZs","./BruteBroadPhase":"o25D","./Grid":"JKg5","./GridBroadPhase":"OVed","./utils":"BP08"}],"FljV":[function(require,module,exports) {
"use strict";function t(t,o){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=e(t))||o&&t&&"number"==typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}function e(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=t[o];return i}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}var s=this&&this.__createBinding||(Object.create?function(t,e,o,i){void 0===i&&(i=o),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,i){void 0===i&&(i=o),t[i]=e[o]}),a=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||s(e,t,o)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhysicsEngine=void 0;var l=require("maabm"),u=require("../Collision"),h=require("./Hooks"),c=require("../BroadPhase");a(require("./Hooks"),exports);var d=function(){function e(o){var r=this;i(this,e),this.idIncrementor=0,this.running=!1,this.time={current:0,elapsed:0,previous:0,lag:0},this.objects=o.objects;var n,s=t(this.objects);try{for(s.s();!(n=s.n()).done;){n.value.id=this.idIncrementor,this.idIncrementor++}}catch(d){s.e(d)}finally{s.f()}this.width=o.width,this.height=o.height,o.broadPhase&&"brute"===o.broadPhase?this.broadPhaseFunction=c.bruteBroadPhase:this.broadPhaseFunction=function(t){return c.gridBroadPhase(Object.assign({min:new l.Vec2D(0,0),max:new l.Vec2D(r.width,r.height),pxPerCell:o.mPerCell||10},t))},o.positionalCorrection?this.positionalCorrection=o.positionalCorrection:void 0===o.positionalCorrection&&(this.positionalCorrection={iterations:18,rate:.8}),this.fps=o.fps||60,this.updateIntervalMilliseconds=1e3/this.fps,this.updateIntervalSeconds=1/this.fps,this.dt=this.updateIntervalSeconds;var a=o.density||1.2,u=h.createDragHook(a);this.preUpdateHooks=o.preUpdateHooks||[h.gravityHook,u],this.postUpdateHooks=o.preUpdateHooks||[],this.drawHook=o.drawHook,this.shouldCollideHook=o.shouldCollideHook,this.postCollideHook=o.postCollideHook}return n(e,[{key:"addPreUpdateHook",value:function(t){this.preUpdateHooks.push(t)}},{key:"addPostUpdateHook",value:function(t){this.postUpdateHooks.push(t)}},{key:"addObject",value:function(t){t.id=this.idIncrementor,this.idIncrementor++,this.objects.push(t)}},{key:"removeObject",value:function(t){this.objects=this.objects.filter(function(e){return e.id!==t})}},{key:"start",value:function(){this.running=!0,this.step()}},{key:"stop",value:function(){this.running=!1,this.time={current:0,elapsed:0,previous:0,lag:0}}},{key:"step",value:function(){var e=this;if(this.running){var o=Date.now();for(0===this.time.previous&&(this.time.previous=o),requestAnimationFrame(function(){e.step()}),this.time.current=o,this.time.elapsed=this.time.current-this.time.previous,this.time.previous=this.time.current,this.time.lag+=this.time.elapsed,this.drawHook&&this.drawHook(this);this.time.lag>=this.updateIntervalMilliseconds;){this.time.lag-=this.updateIntervalMilliseconds;var i,r=t(this.preUpdateHooks);try{for(r.s();!(i=r.n()).done;){(0,i.value)(this)}}catch(a){r.e(a)}finally{r.f()}this.computeCollisions(),this.update(this.updateIntervalSeconds);var n,s=t(this.postUpdateHooks);try{for(s.s();!(n=s.n()).done;){(0,n.value)(this)}}catch(a){s.e(a)}finally{s.f()}}}}},{key:"update",value:function(e){var o,i=t(this.objects);try{for(i.s();!(o=i.n()).done;){o.value.update(e)}}catch(r){i.e(r)}finally{i.f()}}},{key:"computeCollisions",value:function(){var e=this,o=function(){var o,i=t(e.broadPhaseFunction({objects:e.objects}));try{for(i.s();!(o=i.n()).done;){var r=o.value;if(e.shouldCollideHook)if(!e.shouldCollideHook(r))continue;u.resolveCollision(r,e.positionalCorrection),e.postCollideHook&&e.postCollideHook(r)}}catch(n){i.e(n)}finally{i.f()}};this.positionalCorrection,o()}}]),e}();exports.PhysicsEngine=d,d.gravity=new l.Vec2D(0,9.81);
},{"maabm":"RxJD","../Collision":"cCa7","./Hooks":"PxOZ","../BroadPhase":"R7R7"}],"RZiG":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhysicalObject=void 0;var s=require("maabm"),a=function(){function t(e){i(this,t),this.id=-1,this.force=new s.Vec2D(0,0),this.acceleration=new s.Vec2D(0,0),this.torque=0,this.angularAcceleration=0,this.shape=e.shape,this.position=this.shape.center,this.angle=this.shape.angle,this.velocity=e.initialVelocity||new s.Vec2D(0,0),this.angularVelocity=e.initialAngularVelocity||0,this.mass=e.mass,0!==this.mass?this.invMass=1/this.mass:this.invMass=0,void 0!==e.hasGravity?this.hasGravity=e.hasGravity:this.hasGravity=0!==this.mass,this.friction=e.friction||.8,this.restitution=e.restitution||.2,0!==this.mass?(this.inertia=this.shape.getInertia(this.mass),this.invInertia=1/this.inertia):(this.inertia=0,this.invInertia=0),this.dragCoefficient=e.dragCoefficient}return e(t,[{key:"update",value:function(i){var t=this.position.add(this.velocity.mul(i).add(this.acceleration.mul(.5*Math.pow(i,2)))),e=this.force.mul(this.invMass),a=this.velocity.add(this.acceleration.add(e).mul(.5*i)),n=t.sub(this.position);this.move(n),this.acceleration=e,this.velocity=a,this.force=new s.Vec2D(0,0);var h=this.angle+this.angularVelocity*i+this.angularAcceleration*(.5*Math.pow(i,2)),o=this.torque*this.invInertia,r=this.angularVelocity+(this.angularAcceleration+o)*(.5*i),c=h-this.angle;this.rotate(c),this.angularAcceleration=o,this.angularVelocity=r,this.torque=0}},{key:"move",value:function(i){this.shape.move(i),this.position=this.position.add(i)}},{key:"rotate",value:function(i){this.angle+=i,this.shape.rotate(i)}},{key:"copy",value:function(){var i=new t({mass:this.mass,shape:this.shape.copy(),dragCoefficient:this.dragCoefficient,friction:this.friction,hasGravity:this.hasGravity,initialAngularVelocity:this.angularVelocity,initialVelocity:this.velocity,restitution:this.restitution});return i.force=this.force,i.torque=this.torque,i}}]),t}();exports.PhysicalObject=a;
},{"maabm":"RxJD"}],"htDj":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=y();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?l(t):n}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PolygonRigidShape=void 0;var p=require("maabm"),m=require("."),h=function(e){a(r,m.BaseRigidShape);var n=f(r);function r(e){var t;if(o(this,r),(t=n.call(this,Object.assign(Object.assign({},e),{center:new p.Vec2D(0,0)}))).type="polygon",t.vertices=e.vertices,p.Polygon.getInteriorAngles(t.vertices).some(function(e){return e>Math.PI}))throw new Error("Not a valid convex polygon");if(t.center=p.Polygon.getCentroid(t.vertices),t.normals=p.Polygon.getNormals(t.vertices),t.boundAABB=r.computeAABB(t.vertices),0!==t.angle){var i=t.angle;t.angle=0,t.rotate(i)}return t}return c(r,[{key:"move",value:function(e){this.center=this.center.add(e);for(var t=0;t<this.vertices.length;t++)this.vertices[t]=this.vertices[t].add(e)}},{key:"rotate",value:function(e){this.angle+=e;for(var t=0;t<this.vertices.length;t++)this.vertices[t]=this.vertices[t].rotateAround(this.center,e);this.normals=p.Polygon.getNormals(this.vertices)}},{key:"getInertia",value:function(e){return p.Polygon.getMomentOfInertia(this.vertices,e)}},{key:"getArea",value:function(){return p.Polygon.getArea(this.vertices)}},{key:"copy",value:function(){return new r({angle:this.angle,vertices:this.vertices})}}],[{key:"fromCenter",value:function(e){return new r(Object.assign(Object.assign({},e),{vertices:e.vertices.map(function(t){return t.add(e.center)})}))}},{key:"computeAABB",value:function(e){var n,r={min:1/0,max:-1/0},o={min:1/0,max:-1/0},i=new p.Vec2D(1,0),c=new p.Vec2D(0,1),a=t(e);try{for(a.s();!(n=a.n()).done;){var u=n.value,f=u.dot(i);f<r.min&&(r.min=f),f>r.max&&(r.max=f);var s=u.dot(c);s<o.min&&(o.min=s),s>o.max&&(o.max=s)}}catch(l){a.e(l)}finally{a.f()}return new p.Vec2D(r.max-r.min,o.max-o.min)}}]),r}();exports.PolygonRigidShape=h;
},{"maabm":"RxJD",".":"C4Nh"}],"DEVP":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=h();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?a(e):r}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.RectangleRigidShape=void 0;var s=require("maabm"),l=require("."),p=require("./Polygon"),y=function(t){o(i,l.BaseRigidShape);var r=c(i);function i(t){var n;if(e(this,i),(n=r.call(this,t)).type="rectangle",n.width=t.width,n.height=t.height,n.boundAABB=new s.Vec2D(n.width,n.height),n.vertices=[n.center.add(-n.width/2,-n.height/2),n.center.add(-n.width/2,n.height/2),n.center.add(n.width/2,n.height/2),n.center.add(n.width/2,-n.height/2)],n.normals=i.computeNormal(n.vertices),0!==n.angle){var o=n.angle;n.angle=0,n.rotate(o)}return n}return n(i,[{key:"move",value:function(t){this.center=this.center.add(t);for(var e=0;e<4;e++)this.vertices[e]=this.vertices[e].add(t)}},{key:"rotate",value:function(t){this.angle+=t;for(var e=0;e<4;e++)this.vertices[e]=this.vertices[e].rotateAround(this.center,t);this.normals=i.computeNormal(this.vertices),this.boundAABB=p.PolygonRigidShape.computeAABB(this.vertices)}},{key:"getInertia",value:function(t){return 0===t?0:t*(Math.pow(this.width,2)+Math.pow(this.height,2))/12}},{key:"getArea",value:function(){return this.width*this.height}},{key:"copy",value:function(){return new i({angle:this.angle,center:this.center,height:this.height,width:this.width})}}],[{key:"computeNormal",value:function(t){for(var e=[],r=0;r<4;r++){var n=3===r?0:r+1,o=3===n?0:n+1;e.push(t[n].sub(t[o]).normalize())}return e}}]),i}();exports.RectangleRigidShape=y;
},{"maabm":"RxJD",".":"C4Nh","./Polygon":"htDj"}],"V9ql":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=f();return function(){var n,r=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?a(e):n}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.CircleRigidShape=void 0;var l=require("maabm"),p=require("."),y=function(t){o(i,p.BaseRigidShape);var n=u(i);function i(t){var r;return e(this,i),(r=n.call(this,t)).type="circle",r.radius=t.radius,r.boundAABB=new l.Vec2D(2*r.radius,2*r.radius),r.linePoint=r.center.add(r.radius,0),r}return r(i,[{key:"move",value:function(t){this.center=this.center.add(t),this.linePoint=this.linePoint.add(t)}},{key:"rotate",value:function(t){this.angle+=t,this.linePoint=this.linePoint.rotateAround(this.center,t)}},{key:"getInertia",value:function(t){return 0===t?0:t*Math.pow(this.radius,2)/12}},{key:"getArea",value:function(){return Math.PI*Math.pow(this.radius,2)}},{key:"copy",value:function(){return new i({angle:this.angle,center:this.center,radius:this.radius})}}]),i}();exports.CircleRigidShape=y;
},{"maabm":"RxJD",".":"C4Nh"}],"C4Nh":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=this&&this.__exportStar||function(e,r){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||t(r,e,i)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseRigidShape=void 0;var i=function t(r){e(this,t),this.center=r.center,this.angle=r.angle};exports.BaseRigidShape=i,r(require("./Rectangle"),exports),r(require("./Circle"),exports),r(require("./Polygon"),exports);
},{"./Rectangle":"DEVP","./Circle":"V9ql","./Polygon":"htDj"}],"tMbC":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Drawers=void 0;var a=function(){function r(t){e(this,r),this.pxPerM=t.pxPerM,this.vancas=t.vancas}return t(r,[{key:"polygon",value:function(e,r,t){var a=this,i=e.vertices.map(function(e){return e.mul(a.pxPerM)}),n=e.center.mul(this.pxPerM),c=this.vancas.getShaper({color:r}),o=this.vancas.getShaper({color:t?"red":"black",stroke:!0,lineWidth:t?3:1});c.start(),c.go(i[0].x,i[0].y),o.start(),o.go(i[0].x,i[0].y);for(var s=1;s<i.length;s++){var l=i[s];c.line(l.x,l.y),o.line(l.x,l.y)}c.done(),o.done(),this.vancas.circle({x:n.x,y:n.y,radius:2,color:t?"red":"black",lineWidth:t?3:1})}},{key:"circle",value:function(e,r,t){var a=e.center.mul(this.pxPerM),i=e.radius*this.pxPerM;this.vancas.circle({color:r,radius:i,x:a.x,y:a.y}),this.vancas.circle({color:t?"red":"black",radius:i,stroke:!0,x:a.x,y:a.y,lineWidth:t?3:1}),this.vancas.circle({color:t?"red":"black",radius:2,x:a.x,y:a.y,lineWidth:t?3:1})}},{key:"draw",value:function(e,r,t){"circle"===e.shape.type?this.circle(e.shape,r,t):this.polygon(e.shape,r,t)}}]),r}();exports.Drawers=a;
},{}],"iuba":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForceApplier=void 0;var o=require("maabm"),n=require("../src/Engine"),s=function(){function e(i){var s=this;t(this,e),this.engine=i.engine,this.vancas=i.vancas,this.mouse=i.mouse,this.menu=i.menu,this.pxPerM=i.pxPerM,this.mouse.addEventListener(function(t){if("mouseleave"===t.type&&s.startPoint)s.startPoint=void 0;else if(s.menu.selectedId){var e=s.engine.objects.find(function(t){return t.id===s.menu.selectedId});if(e&&0!==e.mass)if(!s.startPoint&&"mousedown"===t.type&&2===t.button&&s.mouse.position){var i=s.mouse.position.div(s.pxPerM);if("circle"===e.shape.type){if(e.position.sub(i).norm()>e.shape.radius)return}else if(-1===o.Polygon.isPointIn(e.shape.vertices,i))return;s.menu.pause(),s.startPoint=s.mouse.position}else if("mouseup"===t.type&&2===t.button&&s.startPoint&&s.mouse.position){var r=s.startPoint.sub(s.mouse.position).mul(10);n.applyFlick({force:r,object:e,pointOfApplication:s.startPoint.div(s.pxPerM)}),s.menu.play(),s.startPoint=void 0}}})}return i(e,[{key:"draw",value:function(){this.startPoint&&this.mouse.position&&(this.vancas.line({x1:this.startPoint.x,y1:this.startPoint.y,x2:this.mouse.position.x,y2:this.mouse.position.y,color:"white",lineWidth:4}),this.vancas.line({x1:this.startPoint.x,y1:this.startPoint.y,x2:this.mouse.position.x,y2:this.mouse.position.y,color:"black",lineWidth:3}))}}]),e}();exports.ForceApplier=s;
},{"maabm":"qONG","../src/Engine":"FljV"}],"Jkof":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Menu=void 0;var n=require("maabm"),s=function(e){var t=document.getElementById(e);if(!t)throw new Error("`#".concat(e,"` element not found."));return function(e){t.textContent=e}},o=function(){function t(i){var o=this;e(this,t),this.paused=!1,this.i=-1,this.engine=i.engine,this.mouse=i.mouse,this.pxPerM=i.pxPerM;var a=document.getElementById("info");if(!a)throw new Error("`#info` element not found.");this.infoEl=a,this.txtElements={angle:s("angle"),angularVelocity:s("angular-velocity"),dragCoefficient:s("drag-coefficient"),friction:s("friction"),id:s("id"),mass:s("mass"),momentOfInertia:s("moment-of-inertia"),position:s("position"),restitution:s("restitution"),shapeType:s("shape-type"),velocity:s("velocity")},this.mouse.addEventListener(function(e){if("mousedown"===e.type&&(0===e.button||2===e.button)&&o.mouse.position){for(var t=o.mouse.position.div(o.pxPerM),i=void 0,s=0;s<o.engine.objects.length;s++){var a=o.engine.objects[s];if("circle"===a.shape.type){if(a.position.sub(t).norm()<=a.shape.radius){i=s;break}}else if(-1!==n.Polygon.isPointIn(a.shape.vertices,t)){i=s;break}}if(void 0!==i){o.i=i;var l=o.engine.objects[i].id;o.selectedId===l&&0===e.button?o.selectedId=void 0:o.selectedId=l}}}),window.addEventListener("keydown",function(e){"p"===e.key&&o.toggle()})}return i(t,[{key:"play",value:function(){this.paused=!1,this.engine.start()}},{key:"pause",value:function(){this.paused=!0,this.engine.stop()}},{key:"toggle",value:function(){this.paused?this.play():this.pause()}},{key:"previous",value:function(){this.i--,this.i<0&&(this.i=this.engine.objects.length-1),this.selectedId=this.engine.objects[this.i].id}},{key:"next",value:function(){this.i++,this.i>this.engine.objects.length-1&&(this.i=0),this.selectedId=this.engine.objects[this.i].id}},{key:"unselect",value:function(){this.i=-1,this.selectedId=void 0}},{key:"select",value:function(e){for(var t=0;t<this.engine.objects.length;t++){if(this.engine.objects[t].id===e)return this.i=t,void(this.selectedId=e)}}},{key:"updateInfo",value:function(){var e=this;if(void 0!==this.selectedId){var t=this.engine.objects.find(function(t){return t.id===e.selectedId});if(!t)return this.selectedId=void 0,this.infoEl.style.display="none",void(this.i=-1);"none"===this.infoEl.style.display&&(this.infoEl.style.display="block");this.txtElements.id(t.id.toString()),this.txtElements.shapeType(t.shape.type),this.txtElements.mass(t.mass.toFixed(4)),this.txtElements.momentOfInertia(t.inertia.toFixed(4)),this.txtElements.friction(t.friction.toFixed(4)),this.txtElements.restitution(t.restitution.toFixed(4)),this.txtElements.dragCoefficient(t.dragCoefficient?t.dragCoefficient.toFixed(4):"none"),this.txtElements.position("(".concat(t.position.x.toFixed(4),";").concat(t.position.y.toFixed(4),")")),this.txtElements.velocity("(".concat(t.velocity.x.toFixed(4),";").concat(t.velocity.y.toFixed(4),")")),this.txtElements.angle((180*t.angle/Math.PI%360).toFixed(4)),this.txtElements.angularVelocity((180*t.angularVelocity/Math.PI).toFixed(4))}else this.infoEl.style.display="none"}}]),t}();exports.Menu=o;
},{"maabm":"qONG"}],"TU2V":[function(require,module,exports) {
"use strict";function e(e,n){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=t(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==o.return||o.return()}finally{if(u)throw i}}}}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Mouse=void 0;var i=require("maabm"),s=function(){function t(n){var r=this;o(this,t),this.eventsListener=[],this.setMousePosition=function(t){r.position=new i.Vec2D(t.clientX-(r.vancas.canvasEl.offsetLeft-window.pageXOffset),t.clientY-(r.vancas.canvasEl.offsetTop-window.pageYOffset));var n,o=e(r.eventsListener);try{for(o.s();!(n=o.n()).done;){(0,n.value)(t)}}catch(a){o.e(a)}finally{o.f()}},this.vancas=n.vancas,this.vancas.canvasEl.addEventListener("mousedown",function(e){switch(r.setMousePosition(e),e.button){case 0:r.button="left";break;case 1:r.button="middle";break;case 2:r.button="right"}}),this.vancas.canvasEl.addEventListener("mouseleave",function(t){r.position=void 0,r.button=void 0;var n,o=e(r.eventsListener);try{for(o.s();!(n=o.n()).done;){(0,n.value)(t)}}catch(a){o.e(a)}finally{o.f()}}),this.vancas.canvasEl.addEventListener("mousemove",function(e){r.setMousePosition(e)}),this.vancas.canvasEl.addEventListener("mouseup",function(e){r.setMousePosition(e),r.button=void 0})}return a(t,[{key:"addEventListener",value:function(e){this.eventsListener.push(e)}}]),t}();exports.Mouse=s;
},{"maabm":"qONG"}],"ZCfc":[function(require,module,exports) {
"use strict";function e(e,n){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw c}}}}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("maabm"),i=require("vancas"),a=require("../src/Engine"),c=require("../src/Objects"),o=require("../src/Shapes"),s=require("./drawers"),h=require("./ForceApplier"),l=require("./menu"),d=require("./mouse"),u=i.createVancas({width:1200,height:700});u.initialize(),u.mouse.contextmenu=!1,u.mouse.preventDefault=!0;var w=10,g={width:u.width/w,height:u.height/w},y=new s.Drawers({pxPerM:w,vancas:u}),f=new d.Mouse({vancas:u}),p=document.getElementById("root");p&&(p.innerHTML="",p.appendChild(u.canvasEl));var v=new c.PhysicalObject({mass:0,shape:new o.RectangleRigidShape({angle:0,center:new r.Vec2D(g.width/2,g.height-4),width:g.width,height:8})}),b=new c.PhysicalObject({mass:0,shape:new o.RectangleRigidShape({angle:Math.PI/12,center:new r.Vec2D(60,g.height/2),width:35,height:4})}),m=new c.PhysicalObject({mass:0,shape:new o.RectangleRigidShape({angle:0,center:new r.Vec2D(g.width-3,g.height-8-25),width:6,height:50})}),j=new c.PhysicalObject({mass:0,shape:new o.RectangleRigidShape({angle:-Math.PI/12,center:new r.Vec2D(g.width-18,15),width:40,height:6})}),x=new c.PhysicalObject({mass:1,shape:new o.CircleRigidShape({angle:0,center:new r.Vec2D(g.width/2,1),radius:3})}),O=[v,x,b,m,j];window.addEventListener("keydown",function(t){if(" "===t.key){var n,r=e(P.objects);try{for(r.s();!(n=r.n()).done;){var i=n.value;P.removeObject(i.id)}}catch(g){r.e(g)}finally{r.f()}var a,s=e(O.map(function(e){return e.copy()}));try{for(s.s();!(a=s.n()).done;){var h=a.value;P.addObject(h)}}catch(g){s.e(g)}finally{s.f()}}if(f.position){var l=f.position.div(w);if("r"===t.key){var d=new c.PhysicalObject({mass:3,shape:new o.RectangleRigidShape({angle:0,center:l,height:3,width:3})});P.addObject(d),S.select(d.id)}if("c"===t.key){var u=new c.PhysicalObject({mass:1,shape:new o.CircleRigidShape({angle:0,center:l,radius:2})});P.addObject(u),S.select(u.id)}}});var P=new a.PhysicsEngine({width:g.width,height:g.height,objects:O.map(function(e){return e.copy()})});P.addPostUpdateHook(function(t){var n,r=e(t.objects);try{for(r.s();!(n=r.n()).done;){var i=n.value;(i.position.x<0||i.position.x>g.width)&&t.removeObject(i.id)}}catch(a){r.e(a)}finally{r.f()}});var S=new l.Menu({engine:P,mouse:f,pxPerM:w}),R=new h.ForceApplier({engine:P,menu:S,mouse:f,pxPerM:w,vancas:u});u.render=function(){u.background("lightgrey"),S.updateInfo();var t,n=["white","brown","purple","yellow","green","blue","orange","pink","cyan"],r=e(P.objects);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.id===S.selectedId;0===i.mass?y.draw(i,"black",a):y.draw(i,n[i.id%n.length],a)}}catch(s){r.e(s)}finally{r.f()}if(R.draw(),f.position){var c,o=f.position;switch(f.button){case"left":c="red";break;case"right":c="green";break;default:c="grey"}u.line({x1:o.x,x2:o.x,y1:o.y-7.5,y2:o.y+7.5,lineWidth:2,color:c}),u.line({x1:o.x-7.5,x2:o.x+7.5,y1:o.y,y2:o.y,lineWidth:2,color:c})}},u.start(),P.start();
},{"maabm":"qONG","vancas":"wcrS","../src/Engine":"FljV","../src/Objects":"RZiG","../src/Shapes":"C4Nh","./drawers":"tMbC","./ForceApplier":"iuba","./menu":"Jkof","./mouse":"TU2V"}]},{},["ZCfc"], null)
//# sourceMappingURL=/main.4bebf63b.js.map